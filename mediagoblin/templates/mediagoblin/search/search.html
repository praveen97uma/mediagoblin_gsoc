{% extends "mediagoblin/base.html" %}
{% import "/mediagoblin/utils/wtforms.html" as wtforms_util %}

{% block mediagoblin_head %}
<link rel="stylesheet" type="text/css"
    href="{{ request.staticdirect('/css/extlib/jquery-ui.css') }}" />
<script type="text/javascript"
    src="{{ request.staticdirect('/js/extlib/jquery-ui.js') }}"></script>
<script>
 $(document).ready(function() {
    $( "#tabs" ).tabs();
});
</script>
{% endblock mediagoblin_head %}



{% block mediagoblin_content %}    
    <form action="{{ request.urlgen('mediagoblin.plugins.search.search') }}" method="GET">
        {{ wtforms_util.render_divs(form) }}
        <div class="form_submit_buttons">
            <input type="submit" value="Go" class="button_form" />
            {{ csrf_token }}
        </div>
    </form>

    {% if results_found %}
            <h2> Results found for query: {{ query }} </h2>
            
            <div id="tabs">
                <ul>
                    {% for result_category in results %}
                    <li><a href="#{{ result_category['css_id'] }}"> {{ result_category['verbose_name'] }} </a></li>
                    {% endfor %}
                </ul>
                {% for result_category in results %}
                    <div id="{{ result_category['css_id'] }}">
                        {% for result in result_category['results'] %}
                            <li><a href = "{{ result['url'] }} "> {{ result['slug'] }}</a></li>
                        {% endfor %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
        {% if query %}
            No results found for query: {{ query }}
        {% endif %}
    {% endif %}
{% endblock %} 

